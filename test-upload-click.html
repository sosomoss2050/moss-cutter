<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>上传区域点击改进测试</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            padding: 20px;
            font-family: 'Inter', sans-serif;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px dashed #ddd;
            border-radius: 8px;
        }
        
        .test-instructions {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .test-instructions h3 {
            color: #4a5568;
            margin-top: 0;
        }
        
        .test-instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .test-instructions li {
            margin: 5px 0;
        }
        
        .success {
            color: #38a169;
            font-weight: bold;
        }
        
        .info {
            color: #3182ce;
            font-weight: bold;
        }
        
        .test-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }
        
        .test-result.success {
            background: #c6f6d5;
            border: 1px solid #9ae6b4;
            display: block;
        }
        
        .test-result.error {
            background: #fed7d7;
            border: 1px solid #fc8181;
            display: block;
        }
        
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #4a5568;
            text-decoration: none;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1><i class="fas fa-mouse-pointer"></i> 上传区域点击改进测试</h1>
        
        <div class="test-instructions">
            <h3>测试说明</h3>
            <p>这个测试页面用于验证上传区域点击改进功能：</p>
            <ul>
                <li><span class="info">目标</span>: 整个上传区域（包括图标、文字、背景）都可以点击触发文件选择</li>
                <li><span class="info">改进前</span>: 只有"选择图片"按钮可以点击</li>
                <li><span class="info">改进后</span>: 整个上传区域都可以点击，提升用户体验</li>
            </ul>
            <p><span class="success">✓ 测试方法</span>: 点击上传区域的不同位置，观察是否能触发文件选择窗口</p>
        </div>
        
        <div class="test-section">
            <h2>测试上传区域</h2>
            <p>请尝试点击以下区域的不同位置：</p>
            
            <!-- 复制主站点的上传区域 -->
            <div class="upload-area" id="uploadArea">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <h3>点击或拖拽上传图片</h3>
                <p>支持 JPG、PNG、GIF、WebP 格式</p>
                <input type="file" id="fileInput" accept="image/*" hidden>
                <button class="btn btn-primary" id="selectFileBtn">
                    <i class="fas fa-folder-open"></i> 选择图片
                </button>
            </div>
            
            <div id="testResult" class="test-result">
                <!-- 测试结果将显示在这里 -->
            </div>
        </div>
        
        <div class="test-instructions">
            <h3>预期行为</h3>
            <ul>
                <li>点击上传区域的任何位置（除了按钮本身）都应该触发文件选择窗口</li>
                <li>点击"选择图片"按钮也应该正常工作</li>
                <li>鼠标悬停时应该有视觉反馈（边框变色、阴影）</li>
                <li>点击时应该有动画反馈（轻微缩放）</li>
                <li>拖放功能应该仍然正常工作</li>
            </ul>
        </div>
        
        <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> 返回主页面</a>
    </div>
    
    <script>
        // 复制主站点的JavaScript逻辑
        const uploadArea = document.getElementById('uploadArea');
        const selectFileBtn = document.getElementById('selectFileBtn');
        const fileInput = document.getElementById('fileInput');
        const testResult = document.getElementById('testResult');
        
        let clickCount = 0;
        const clickPositions = [];
        
        // 事件监听器
        selectFileBtn.addEventListener('click', () => {
            clickCount++;
            clickPositions.push('按钮点击');
            updateTestResult();
            fileInput.click();
        });
        
        // 整个上传区域都可以点击触发文件选择
        uploadArea.addEventListener('click', (e) => {
            // 防止按钮点击事件冒泡导致重复触发
            if (e.target !== selectFileBtn && !selectFileBtn.contains(e.target)) {
                clickCount++;
                
                // 记录点击位置
                const rect = uploadArea.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                clickPositions.push(`区域点击 (${Math.round(x)}px, ${Math.round(y)}px)`);
                
                // 添加点击反馈
                uploadArea.classList.add('click-feedback');
                setTimeout(() => {
                    uploadArea.classList.remove('click-feedback');
                }, 300);
                
                updateTestResult();
                fileInput.click();
            }
        });
        
        fileInput.addEventListener('change', function(e) {
            if (e.target.files && e.target.files[0]) {
                testResult.innerHTML = `
                    <h4><i class="fas fa-check-circle success"></i> 文件选择成功！</h4>
                    <p>选择的文件: <strong>${e.target.files[0].name}</strong></p>
                    <p>文件大小: ${(e.target.files[0].size / 1024).toFixed(2)} KB</p>
                    <p>文件类型: ${e.target.files[0].type}</p>
                `;
                testResult.className = 'test-result success';
            }
        });
        
        // 拖放功能测试
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('drag-over');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('drag-over');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('drag-over');
            
            if (e.dataTransfer.files && e.dataTransfer.files[0]) {
                testResult.innerHTML = `
                    <h4><i class="fas fa-check-circle success"></i> 拖放上传成功！</h4>
                    <p>拖放的文件: <strong>${e.dataTransfer.files[0].name}</strong></p>
                    <p>文件大小: ${(e.dataTransfer.files[0].size / 1024).toFixed(2)} KB</p>
                    <p>文件类型: ${e.dataTransfer.files[0].type}</p>
                    <p><em>注意：这只是测试，实际文件处理功能在主页面</em></p>
                `;
                testResult.className = 'test-result success';
            }
        });
        
        function updateTestResult() {
            testResult.innerHTML = `
                <h4><i class="fas fa-info-circle info"></i> 点击测试记录</h4>
                <p>总点击次数: <strong>${clickCount}</strong></p>
                <p>点击位置记录:</p>
                <ul>
                    ${clickPositions.map(pos => `<li>${pos}</li>`).join('')}
                </ul>
                <p><em>请选择图片文件以继续测试...</em></p>
            `;
            testResult.className = 'test-result info';
        }
        
        // 初始测试结果
        updateTestResult();
        
        console.log('上传区域点击改进测试已加载');
        console.log('测试目标：验证整个上传区域都可以点击触发文件选择');
    </script>
</body>
</html>